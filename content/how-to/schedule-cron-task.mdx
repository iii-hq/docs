---
title: 'Schedule a Cron Task'
description: 'How to run a Function on a recurring schedule.'
---

## Goal

Run a Function at regular intervals (cleanup jobs, report generation, health checks) using the Cron module.

## Steps

### 1. Enable the Cron module

```yaml
modules:
  - class: modules::cron::CronModule
    config:
      adapter:
        class: modules::cron::KvCronAdapter
```

### 2. Register the Function

<Tabs groupId="language" persist items={["Node / TypeScript", "Python", "Rust"]}>
<Tab value="Node / TypeScript">
```typescript
import { init } from 'iii-sdk'

const iii = init('ws://localhost:49134')

iii.registerFunction(
  { id: 'cleanup::expired-sessions' },
  async () => {
    const count = await deleteExpiredSessions()
    return { deleted: count }
  }
)
```
</Tab>
<Tab value="Python">
```python
import asyncio
import os
import signal
from iii import III

iii = III(os.environ.get('III_BRIDGE_URL', 'ws://localhost:49134'))

async def cleanup_sessions():
    count = await delete_expired_sessions()
    return {'deleted': count}

iii.register_function('cleanup::expired-sessions', cleanup_sessions)

async def main():
    await iii.connect()
    stop = asyncio.Event()
    loop = asyncio.get_running_loop()
    for sig in (signal.SIGINT, signal.SIGTERM):
        loop.add_signal_handler(sig, stop.set)
    await stop.wait()

asyncio.run(main())
```
</Tab>
<Tab value="Rust">
```rust
use iii_sdk::III;
use serde_json::json;
use tokio::signal;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let url = std::env::var("III_BRIDGE_URL").unwrap_or_else(|_| "ws://127.0.0.1:49134".to_string());
    let iii = III::new(&url);
    iii.connect().await?;

    iii.register_function("cleanup::expired-sessions", |_| async move {
        let count = delete_expired_sessions().await;
        Ok(json!({ "deleted": count }))
    });

    signal::ctrl_c().await?;
    Ok(())
}
```
</Tab>
</Tabs>

### 3. Register the Cron trigger

<Tabs groupId="language" persist items={["Node / TypeScript", "Python", "Rust"]}>
<Tab value="Node / TypeScript">
```typescript
iii.registerTrigger({
  type: 'cron',
  function_id: 'cleanup::expired-sessions',
  config: { expression: '0 */6 * * *' },
})
```
</Tab>
<Tab value="Python">
```python
iii.register_trigger(
    type="cron",
    function_id="cleanup::expired-sessions",
    config={"expression": "0 */6 * * *"},
)
```
</Tab>
<Tab value="Rust">
```rust
iii.register_trigger("cron", "cleanup::expired-sessions", json!({
    "expression": "0 */6 * * *"
}))?;
```
</Tab>
</Tabs>

This runs the Function every 6 hours. The `expression` field uses standard cron syntax.

### Common schedules

| Expression | Frequency |
|------------|-----------|
| `* * * * *` | Every minute |
| `*/5 * * * *` | Every 5 minutes |
| `0 * * * *` | Every hour |
| `0 */6 * * *` | Every 6 hours |
| `0 0 * * *` | Daily at midnight |
| `0 9 * * 1` | Every Monday at 9 AM |

## Result

The Function executes automatically on the defined schedule. The Engine handles scheduling, no external cron daemon needed.

<Callout title="See also" type="info">
  For advanced scheduling options, see the [Cron module reference](/docs/modules/module-cron).
</Callout>
